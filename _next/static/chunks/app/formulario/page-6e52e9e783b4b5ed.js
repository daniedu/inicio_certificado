(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[343],{3958:(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>N});var r=o(5155),i=o(1498),a=o(2398),t=o(2115);o(183);var n=o(483),l=o(2177),m=o(7813),d=o(1715),c=o(967),u=o(1153),g=o(221),p=o(6819),b=o(169);let f=(e,s)=>{let[o,r]=(0,t.useState)(()=>{try{let o=window.localStorage.getItem(e);return o?JSON.parse(o):s}catch(e){return console.error("Error reading from localStorage",e),s}});return[o,s=>{try{r(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error("Error writing to localStorage",e)}}]},x=e=>{let{disableLastStep:s,formMethods:o,labels:i=[],onSubmit:a}=e,n=i.filter(e=>e&&"string"==typeof e.label&&t.isValidElement(e.component)).map(e=>e.component);return(0,r.jsx)("div",{id:"formulario",className:"w-full flex flex-col items-center",children:(0,r.jsxs)(l.Op,{...o,children:[(0,r.jsx)("div",{className:"w-full flex flex-col items-start justify-center",children:n.map((e,s)=>(0,r.jsxs)("div",{className:"w-full mb-8",children:[" ",e]},s))}),(0,r.jsx)("div",{className:"flex justify-end w-full mt-8 pt-4 border-t border-woodyWarm-300",children:(0,r.jsx)("button",{disabled:s,type:"submit",className:"rounded-md px-4 py-2 text-xl ml-auto cursor-pointer bg-woodyWarm-800 text-white hover:bg-woodyWarm-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Formulario ya enviado":"Enviar Solicitud"},"submit-form")})]})})},h=()=>{let[e,s]=(0,t.useState)(!1),[o,i]=(0,t.useState)(!1),[a,h]=f("formStep",0),[y,v]=f("submited",0),{postData:E}=(0,c.su)(),S=[{label:"Solicitud",component:(0,r.jsx)(n.q,{})},{label:"Persona a Certificar",component:(0,r.jsx)(m.v,{})},{label:"Documentos",component:(0,r.jsx)(d.J,{})}],j=S.length,N=u.z.object({requesterEmail:u.z.string({message:"Un Correo Es Requerido"}).email({message:"Formato de correo inv\xe1lido."}).nonempty({message:"El correo electr\xf3nico es obligatorio."}),requesterName:u.z.string({message:"Un Nombre Es Requerido"}).min(1,{message:"First Name is required"}),requesterAge:u.z.number({message:"Inserta un numero"}).min(1,{message:"La edad m\xednima es 1 a\xf1o."}).max(120,{message:"La edad m\xe1xima es 120 a\xf1os."}),requesterGender:u.z.string({message:"Un Genero Es Requerido"}).min(1,{message:"Selecciona un g\xe9nero."}),documentType:u.z.string({message:"Un Tipo de documento es Requerido"}).min(1,{message:"Selecciona un tipo de documento."}),documentNumber:u.z.string({message:"Un numero de documento es Requerido"}).min(5,{message:"El n\xfamero de documento es obligatorio."}).max(15,{message:"El n\xfamero de documento no debe exceder 15 caracteres."}),address:u.z.string({message:"Una direccion es Requerida"}).min(5,{message:"La direcci\xf3n es obligatoria."}),neighborhoodOrVillage:u.z.string({message:"Un nombre de barrio o vereda Es Requerido"}).min(2,{message:"El barrio o vereda es obligatorio."}),sector:u.z.string().min(1,{message:"Selecciona un sector."}),phone:u.z.array(u.z.string({message:"Se requieren ambos numeros de telefono"}).min(7,{message:"Se requiere un n\xfamero de tel\xe9fono (m\xednimo 7 d\xedgitos)."})).length(2,"Debes ingresar exactamente dos n\xfameros de tel\xe9fono."),certifieeName:u.z.string({message:"Un Nombre Es Requerido"}).min(2,{message:"El nombre de la persona a certificar es obligatorio."}),diagnosis:u.z.string({message:"Un Diagnostico Es Requerido"}).min(5,{message:"El diagn\xf3stico es obligatorio y debe ser descriptivo."}).max(500,{message:"El diagn\xf3stico es demasiado largo."}),disabilityType:u.z.string({message:"Un Tipo de disabilidad es Requerido"}).min(1,{message:"Selecciona un tipo de discapacidad."}),certifieeDocumentType:u.z.string().min(1,{message:"Selecciona un tipo de documento para la persona a certificar."}),certifieeDocumentNumber:u.z.string({message:"Un numero de documento es Requerido"}).min(5,"El n\xfamero de documento es obligatorio.").max(15,"El n\xfamero de documento no debe exceder 15 caracteres."),certifieeAge:u.z.number({message:"La edad es Requerida"}).min(0,"La edad m\xednima es 0 a\xf1os.").max(120,"La edad m\xe1xima es 120 a\xf1os."),eps:u.z.string({message:"Una EPS es Requerida"}).min(2,"La EPS es obligatoria."),requestCriterion:u.z.string({message:"Un criterio Es Requerido"}).min(1,"El criterio de solicitud es obligatorio."),observations:u.z.string({message:"Una observacion es Requerido"}).min(5,"Las observaciones son obligatorias para aclarar el tipo de atenci\xf3n.").max(1e3,"Las observaciones son demasiado largas."),clinicalHistoryFile:u.z.object({files:u.z.instanceof(File,{message:"Por favor, sube un archivo de historia cl\xednica."}).refine(e=>e&&e.size<=5242880,"El archivo debe ser menor de 5MB.").refine(e=>e&&["application/pdf","image/jpeg","image/png"].includes(e.type),"Solo se permiten PDF, JPG o PNG para la historia cl\xednica.").transform(e=>e)}),idDocumentFile:u.z.object({files:u.z.instanceof(File,{message:"Por favor, sube un archivo de historia cl\xednica."}).refine(e=>e&&e.size<=5242880,"El archivo debe ser menor de 5MB.").refine(e=>e&&["application/pdf","image/jpeg","image/png"].includes(e.type),"Solo se permiten PDF, JPG o PNG para la historia cl\xednica.").transform(e=>e)})}),q=(0,l.mN)({resolver:(0,g.u)(N),mode:"onBlur"}),w=async e=>{console.log("Final form submitted!"),console.log("Form data:",e),console.log("Form data:",(0,p.sX)()),i(!0),s(!0);let o=null;if(e.clinicalHistoryFile.files)try{o=await z(e.clinicalHistoryFile.files)}catch(e){console.error("Error converting clinical history file to Base64:",e)}let r=null;if(e.idDocumentFile.files)try{r=await z(e.idDocumentFile.files)}catch(e){console.error("Error converting ID document file to Base64:",e)}await E({method:"Add",sheetName:"Respuestas",content:[(0,p.sX)(),e.requesterEmail,e.requesterName,e.requesterAge,e.requesterGender,e.documentType,e.documentNumber,e.address,e.neighborhoodOrVillage,e.sector,e.phone[0],e.phone[1],e.certifieeName,e.diagnosis,e.disabilityType,e.certifieeDocumentType,e.certifieeDocumentNumber,e.certifieeAge,e.eps,e.requestCriterion,e.observations,o,r,new Date().toISOString()]}),v(!0)},z=e=>new Promise((s,o)=>{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>s(r.result),r.onerror=e=>o(e)});return(0,r.jsxs)("section",{className:"container mx-auto px-4 py-12 md:py-6",children:[(0,r.jsxs)("div",{className:"   bg-woodyWarm-100   text-woodyWarm-900   p-6    rounded-lg   text-center   max-w-[950px]   mx-auto   flex flex-col   items-center   justify-center   space-y-6   shadow-xl   ",children:[(0,r.jsx)("h2",{className:"text-3xl font-extrabold text-woodyWarm-800 text-center mb-10 md:mb-12",children:"Solicitud para el Certificado de Discapacidad"}),(0,r.jsx)("form",{onSubmit:q.handleSubmit(w),className:"w-full space-y-6",children:(0,r.jsx)(x,{disableLastStep:y,formMethods:q,currentStep:a,totalSteps:j,setStep:h,labels:S})})]}),(0,r.jsx)(b.T,{isOpen:o,finishedLoading:y,title:"Procesando tu Solicitud",message:"Estamos procesando tu solicitud, este proceso se tomara unos segundos, por favor espera"})]})};var y=o(2212),v=o(7515),E=o(9066),S=o(4271),j=o(230);function N(){return(0,r.jsxs)("div",{className:"bg-paleWhite ",children:[(0,r.jsx)(a.P,{}),(0,r.jsx)(S.E,{}),(0,r.jsx)(v.Y,{}),(0,r.jsx)(y.s,{}),(0,r.jsx)(i.d,{}),(0,r.jsx)(j.r,{}),(0,r.jsx)(E.F,{}),(0,r.jsx)(h,{})]})}},8763:(e,s,o)=>{Promise.resolve().then(o.bind(o,3958))}},e=>{var s=s=>e(e.s=s);e.O(0,[105,204,850,225,460,441,684,358],()=>s(8763)),_N_E=e.O()}]);