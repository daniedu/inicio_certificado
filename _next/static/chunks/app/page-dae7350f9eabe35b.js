(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{689:(e,o,i)=>{"use strict";i.r(o),i.d(o,{default:()=>z});var s=i(5155),a=i(1498),r=i(2398),t=i(2115),n=i(6408),l=i(760),m=i(183),d=i(483),c=i(2177),u=i(7813),g=i(1715),p=i(967),x=i(1153),b=i(221),f=i(6819),h=i(169);let y=(e,o)=>{let[i,s]=(0,t.useState)(()=>{try{let i=window.localStorage.getItem(e);return i?JSON.parse(i):o}catch(e){return console.error("Error reading from localStorage",e),o}});return[i,o=>{try{s(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(e){console.error("Error writing to localStorage",e)}}]},w=e=>{let{disableLastStep:o,formMethods:i,currentStep:a,totalSteps:r,setStep:d,labels:u=[]}=e,{formState:{isValid:g},trigger:p}=i,x=u.filter(e=>e&&"string"==typeof e.label&&t.isValidElement(e.component));return(0,s.jsxs)("div",{id:"formulario",className:"w-full flex flex-col items-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-between w-[80%] max-w-full mx-auto mb-8",children:Array.from({length:r}).map((e,o)=>(0,s.jsxs)(t.Fragment,{children:[o>0&&(0,s.jsx)("div",{className:"flex-1 h-1 bg-woodyWarm-200 mx-1 relative overflow-hidden rounded-full",children:(0,s.jsx)(n.P.div,{className:"absolute top-0 left-0 h-full bg-woodyWarm-700",initial:{width:0},animate:{width:a>=o?"100%":"0%"},transition:{duration:.5,ease:"easeInOut"}})}),(0,s.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,s.jsx)(n.P.div,{onClick:()=>d(o),className:"\n                  relative\n                  cursor-pointer\n                  w-16 h-16 rounded-full\n                  flex items-center justify-center\n                  font-semibold text-3xl\n                  transition-colors duration-300 ease-in-out\n                  ".concat(o<=a?"bg-woodyWarm-700 text-white":"bg-woodyWarm-200 text-woodyWarm-700","\n                "),initial:{scale:.8,opacity:.7},animate:{scale:o===a?1.1:1,opacity:1},transition:{type:"spring",stiffness:400,damping:20},children:o+1}),x[o]&&(0,s.jsx)("p",{className:"\n                  absolute top-[calc(100%+0.5rem)]\n                  whitespace-nowrap text-xl font-bold mt-2 max-w-[350px]\n                  ".concat(o<=a?"text-woodyWarm-800 font-medium":"text-woodyWarm-500","\n                "),children:x[o].label})]})]},o))}),(0,s.jsxs)(c.Op,{...i,children:[(0,s.jsx)("div",{className:"w-full min-h-[200px] flex items-start justify-center mt-12",children:(0,s.jsx)(l.N,{mode:"wait",children:(0,s.jsx)(n.P.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full",children:x[a]?x[a].component:null},a)})}),(0,s.jsxs)("div",{className:"flex justify-between w-full mt-8 pt-4 border-t border-woodyWarm-300",children:[(0,s.jsx)(m.$,{type:"button",onClick:()=>d(e=>Math.max(0,e-1)),disabled:0===a,variant:"outline",className:"px-3 text-xl bg-woodyWarm-50 text-woodyWarm-800 hover:bg-woodyWarm-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),a<r-1?(0,s.jsx)(m.$,{type:"button",onClick:async()=>{d(e=>Math.min(r-1,e+1))},className:"px-3 text-xl ml-auto bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"},"next-form"):(0,s.jsx)(m.$,{disabled:o,type:"submit",className:"px-3 text-xl ml-auto cursor-pointer bg-woodyWarm-800 text-white hover:bg-woodyWarm-700disabled:opacity-50 disabled:cursor-not-allowed",children:o?"formulario ya enviado":"Enviar Solicitud"},"submit-form")]})]})]})},v=()=>{let[e,o]=(0,t.useState)(!1),[i,a]=(0,t.useState)(!1),[r,n]=y("formStep",0),[l,m]=y("submited",0),{postData:v}=(0,p.su)(),j=[{label:"Solicitud",component:(0,s.jsx)(d.q,{})},{label:"Persona a Certificar",component:(0,s.jsx)(u.v,{})},{label:"Documentos",component:(0,s.jsx)(g.J,{})}],N=j.length,S=x.z.object({requesterEmail:x.z.string({message:"Un Correo Es Requerido"}).email({message:"Formato de correo inv\xe1lido."}).nonempty({message:"El correo electr\xf3nico es obligatorio."}),requesterName:x.z.string({message:"Un Nombre Es Requerido"}).min(1,{message:"First Name is required"}),requesterAge:x.z.number({message:"Inserta un numero"}).min(1,{message:"La edad m\xednima es 1 a\xf1o."}).max(120,{message:"La edad m\xe1xima es 120 a\xf1os."}),requesterGender:x.z.string({message:"Un Genero Es Requerido"}).min(1,{message:"Selecciona un g\xe9nero."}),documentType:x.z.string({message:"Un Tipo de documento es Requerido"}).min(1,{message:"Selecciona un tipo de documento."}),documentNumber:x.z.string({message:"Un numero de documento es Requerido"}).min(5,{message:"El n\xfamero de documento es obligatorio."}).max(15,{message:"El n\xfamero de documento no debe exceder 15 caracteres."}),address:x.z.string({message:"Una direccion es Requerida"}).min(5,{message:"La direcci\xf3n es obligatoria."}),neighborhoodOrVillage:x.z.string({message:"Un nombre de barrio o vereda Es Requerido"}).min(2,{message:"El barrio o vereda es obligatorio."}),sector:x.z.string().min(1,{message:"Selecciona un sector."}),phone:x.z.array(x.z.string({message:"Se requieren ambos numeros de telefono"}).min(7,{message:"Se requiere un n\xfamero de tel\xe9fono (m\xednimo 7 d\xedgitos)."})).length(2,"Debes ingresar exactamente dos n\xfameros de tel\xe9fono."),certifieeName:x.z.string({message:"Un Nombre Es Requerido"}).min(2,{message:"El nombre de la persona a certificar es obligatorio."}),diagnosis:x.z.string({message:"Un Diagnostico Es Requerido"}).min(5,{message:"El diagn\xf3stico es obligatorio y debe ser descriptivo."}).max(500,{message:"El diagn\xf3stico es demasiado largo."}),disabilityType:x.z.string({message:"Un Tipo de disabilidad es Requerido"}).min(1,{message:"Selecciona un tipo de discapacidad."}),certifieeDocumentType:x.z.string().min(1,{message:"Selecciona un tipo de documento para la persona a certificar."}),certifieeDocumentNumber:x.z.string({message:"Un numero de documento es Requerido"}).min(5,"El n\xfamero de documento es obligatorio.").max(15,"El n\xfamero de documento no debe exceder 15 caracteres."),certifieeAge:x.z.number({message:"La edad es Requerida"}).min(0,"La edad m\xednima es 0 a\xf1os.").max(120,"La edad m\xe1xima es 120 a\xf1os."),eps:x.z.string({message:"Una EPS es Requerida"}).min(2,"La EPS es obligatoria."),requestCriterion:x.z.string({message:"Un criterio Es Requerido"}).min(1,"El criterio de solicitud es obligatorio."),observations:x.z.string({message:"Una observacion es Requerido"}).min(5,"Las observaciones son obligatorias para aclarar el tipo de atenci\xf3n.").max(1e3,"Las observaciones son demasiado largas."),clinicalHistoryFile:x.z.object({files:x.z.instanceof(File,{message:"Por favor, sube un archivo de historia cl\xednica."}).refine(e=>e&&e.size<=5242880,"El archivo debe ser menor de 5MB.").refine(e=>e&&["application/pdf","image/jpeg","image/png"].includes(e.type),"Solo se permiten PDF, JPG o PNG para la historia cl\xednica.").transform(e=>e)}),idDocumentFile:x.z.object({files:x.z.instanceof(File,{message:"Por favor, sube un archivo de historia cl\xednica."}).refine(e=>e&&e.size<=5242880,"El archivo debe ser menor de 5MB.").refine(e=>e&&["application/pdf","image/jpeg","image/png"].includes(e.type),"Solo se permiten PDF, JPG o PNG para la historia cl\xednica.").transform(e=>e)})}),E=(0,c.mN)({resolver:(0,b.u)(S),mode:"onBlur"}),q=async e=>{console.log("Final form submitted!"),console.log("Form data:",e),console.log("Form data:",(0,f.sX)()),a(!0),o(!0);let i=null;if(e.clinicalHistoryFile.files)try{i=await z(e.clinicalHistoryFile.files)}catch(e){console.error("Error converting clinical history file to Base64:",e)}let s=null;if(e.idDocumentFile.files)try{s=await z(e.idDocumentFile.files)}catch(e){console.error("Error converting ID document file to Base64:",e)}await v({method:"Add",sheetName:"Respuestas",content:[(0,f.sX)(),e.requesterEmail,e.requesterName,e.requesterAge,e.requesterGender,e.documentType,e.documentNumber,e.address,e.neighborhoodOrVillage,e.sector,e.phone[0],e.phone[1],e.certifieeName,e.diagnosis,e.disabilityType,e.certifieeDocumentType,e.certifieeDocumentNumber,e.certifieeAge,e.eps,e.requestCriterion,e.observations,i,s,new Date().toISOString()]}),m(!0)},z=e=>new Promise((o,i)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>o(s.result),s.onerror=e=>i(e)});return(0,s.jsxs)("section",{className:"container mx-auto px-4 py-12 md:py-6",children:[(0,s.jsxs)("div",{className:"   bg-white   text-woodyWarm-900   p-6    rounded-lg   text-center   max-w-[950px]   mx-auto   flex flex-col   items-center   justify-center   space-y-6   shadow-xl   ",children:[(0,s.jsx)("h2",{className:"text-3xl font-extrabold text-woodyWarm-800 text-center mb-10 md:mb-12",children:"Solicitud para el Certificado de Discapacidad"}),(0,s.jsx)("form",{onSubmit:E.handleSubmit(q),className:"w-full space-y-6",children:(0,s.jsx)(w,{disableLastStep:l,formMethods:E,currentStep:r,totalSteps:N,setStep:n,labels:j})})]}),(0,s.jsx)(h.T,{isOpen:i,finishedLoading:l,title:"Procesando tu Solicitud",message:"Estamos procesando tu solicitud, este proceso se tomara unos segundos, por favor espera"})]})};var j=i(2212),N=i(7515),S=i(9066),E=i(4271),q=i(230);function z(){return(0,s.jsxs)("div",{className:"bg-paleWhite ",children:[(0,s.jsx)(r.P,{}),(0,s.jsx)(E.E,{}),(0,s.jsx)(N.Y,{}),(0,s.jsx)(j.s,{}),(0,s.jsx)(a.d,{}),(0,s.jsx)(q.r,{}),(0,s.jsx)(S.F,{}),(0,s.jsx)(v,{})]})}},6353:(e,o,i)=>{Promise.resolve().then(i.bind(i,689))}},e=>{var o=o=>e(e.s=o);e.O(0,[105,204,850,225,299,460,441,684,358],()=>o(6353)),_N_E=e.O()}]);